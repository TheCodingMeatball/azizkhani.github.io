---
layout: post
title: "Spring and hibernate 4 integration"
comments: true
---
<p><span style="font-size: medium;">add this dependancy</span></p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;<span style="font-size: small;"> &lt;!-- Hibernate framework --&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;dependency&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;version&gt;4.1.4.Final&lt;/version&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/dependency&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;dependency&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;groupId&gt;javax.persistence&lt;/groupId&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;artifactId&gt;persistence-api&lt;/artifactId&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;version&gt;1.0.2&lt;/version&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/dependency&gt;</span><br /><span style="font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;!-- end hibernate --&gt;</span></p>
<p>&nbsp;</p>
<p><span style="font-size: medium;">and then change spring configuration like this</span></p>
<p>&nbsp;</p>
<p><br /><br />&nbsp;&nbsp;&nbsp;<span style="font-size: small; color: #000080;"> &lt;tx:annotation-driven transaction-manager="hibernateTransactionManager" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &lt;bean id="dataSource"&nbsp; class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="driverClassName" value="${hibernate.connection.driver_class}" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="url" value="${hibernate.connection.url}" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="username" value="${hibernate.connection.username}" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="password" value="${hibernate.connection.password}" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &lt;/bean&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &lt;bean id="sessionFactory" class="<span style="color: #ff0000;">org.springframework.orm.hibernate4.LocalSessionFactoryBean</span>"&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="dataSource" ref="dataSource" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="mappingLocations"&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;list&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;value&gt;/WEB-INF/classes/hibernate/**/*.hbm.xml&lt;/value&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/list&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/property&gt;</span><br /><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="hibernateProperties"&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;props&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.connection.driver_class"&gt; ${hibernate.connection.driver_class}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.connection.url"&gt; ${hibernate.connection.url}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.connection.username"&gt; ${hibernate.connection.username}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.connection.password"&gt; ${hibernate.connection.password}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;!-- &lt;prop key="hibernate.connection.internal_logon"&gt; ${hibernate.connection.internal_logon}&lt;/prop&gt; --&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.dialect"&gt; ${hibernate.dialect}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.show_sql"&gt; ${hibernate.show_sql}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;prop key="hibernate.hbm2ddl.auto"&gt; ${hibernate.hbm2ddl_auto}&lt;/prop&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;!-- &lt;prop key="hibernate.default_schema"&gt; ${hibernate.default_schema}&lt;/prop&gt; --&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/props&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/property&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &lt;/bean&gt;</span><br /><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &lt;bean id="hibernateTransactionManager" class="<span style="color: #ff0000;">org.springframework.orm.hibernate4.HibernateTransactionManager</span>"&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;property name="sessionFactory" ref="sessionFactory" /&gt;</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; &lt;/bean&gt;</span></p>
<p>&nbsp;</p>
<p><span style="font-size: medium;">and now</span></p>
<p>&nbsp;</p>
<p><span style="font-size: small; color: #000080;">package org.azizkhani.dao;</span><br /><br /><span style="font-size: small; color: #000080;">import java.util.List;</span><br /><br /><span style="font-size: small; color: #000080;">import org.azizkhani.core.QueryResult;</span><br /><br /><span style="font-size: small; color: #000080;">public interface IGenericRepository&lt;T&gt; {</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public List&lt;T&gt; getAll();</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public List&lt;T&gt; getAll(String where, String order, int pageNumber,int pageSize);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public QueryResult&lt;T&gt; getAllGrid(String where, String order, int pageNumber,int pageSize);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public T loadByEntityId(int entityId);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public T single(String where);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public void add(T entity);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public void delete(T entity);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public void deleteByEntityId(int entityId);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public void update(T entity);</span><br /><span style="font-size: small; color: #000080;">&nbsp;&nbsp;&nbsp; public int count();</span><br /><span style="font-size: small; color: #000080;">}</span></p>
<p>&nbsp;</p>
<p><span style="font-size: medium;">implementation</span></p>
<p>&nbsp;</p>
<p><span style="color: #000080; font-size: small;">package org.azizkhani.dao.impl.hibernate;</span><br /><br /><span style="color: #000080; font-size: small;">import java.util.List;</span><br /><br /><span style="color: #000080; font-size: small;">import org.azizkhani.common.utility.HQLUtility;</span><br /><span style="color: #000080; font-size: small;">import org.</span><span style="color: #000080; font-size: small;"><span style="color: #000080; font-size: small;">azizkhani</span>.core.QueryResult;</span><br /><span style="color: #000080; font-size: small;">import org.</span><span style="color: #000080; font-size: small;"><span style="color: #000080; font-size: small;">azizkhani</span>.dao.IGenericRepository;</span><br /><span style="color: #000080; font-size: small;">import org.hibernate.Criteria;</span><br /><span style="color: #000080; font-size: small;">import org.hibernate.Query;</span><br /><span style="color: #000080; font-size: small;">import org.hibernate.Session;</span><br /><span style="color: #000080; font-size: small;">import org.hibernate.SessionFactory;</span><br /><span style="color: #000080; font-size: small;">import org.springframework.beans.factory.annotation.Autowired;</span><br /><span style="color: #000080; font-size: small;">import org.springframework.stereotype.Repository;</span><br /><span style="color: #000080; font-size: small;">import org.springframework.transaction.annotation.Transactional;</span><br /><br /><span style="color: #000080; font-size: small;">@Repository</span><br /><span style="color: #000080; font-size: small;">public abstract class GenericRepository&lt;T&gt;&nbsp; implements IGenericRepository&lt;T&gt; {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; protected Class&lt;T&gt; domainClass = getDomainClass();</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; protected abstract Class&lt;T&gt; getDomainClass();</span><br />&nbsp;&nbsp;&nbsp; <br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; @Autowired</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; private SessionFactory sessionFactory;</span><br />&nbsp;&nbsp;&nbsp; <br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public List&lt;T&gt; getAll() {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Criteria criteria = getSession().createCriteria(domainClass.getName());</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return criteria.list();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; public Session getSession() {</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return sessionFactory.getCurrentSession();</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch (Exception e) {</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println(e.getMessage().toString());</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return sessionFactory.openSession();</span><br /><span style="color: #ff0000; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public QueryResult&lt;T&gt; getAllGrid(String where, String order, int pageNumber, int pageSize) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Session session = getSession();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; StringBuffer jql = new StringBuffer("from " + domainClass.getName()</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; + " e ");</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HQLUtility.toHQL(jql, where, order);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Query query = session.createQuery(jql.toString());</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (pageSize &gt; 0)</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; query.setFirstResult(pageNumber * pageSize);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; query.setMaxResults(pageSize);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; List&lt;T&gt; list = query.list();</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; StringBuffer jqlCount = new StringBuffer("select count(*)&nbsp; from "</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; + domainClass.getName() + " e ");</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HQLUtility.toHQL(jqlCount, where, "");</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; int count = ((Long) getSession().createQuery(jqlCount.toString())</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .uniqueResult()).intValue();</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return new QueryResult&lt;T&gt;(pageNumber, count, pageSize, list);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public List&lt;T&gt; getAll(String where, String order, int pageNumber, int pageSize) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Session session = getSession();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; StringBuffer jql = new StringBuffer("from " + domainClass.getName()</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; + " e ");</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HQLUtility.toHQL(jql, where, order);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Query query = session.createQuery(jql.toString());</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (pageSize &gt; 0)</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; query.setFirstResult(pageNumber * pageSize);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; query.setMaxResults(pageSize);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return query.list();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Transactional(readOnly=true)</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public T loadByEntityId(int entityId) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return (T) getSession().load(domainClass, entityId);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public T single(String where) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return null;</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public void add(T entity) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Session session = getSession();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.beginTransaction();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.save(entity);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.getTransaction().commit();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.close();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public void delete(T entity) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; getSession().delete(entity);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public void deleteByEntityId(int entityId) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Session session = getSession();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.beginTransaction();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Object obj = session.load(domainClass, entityId);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.delete(obj);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.getTransaction().commit();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.close();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public void update(T entity) {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Session session = getSession();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.beginTransaction();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.update(entity);</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.getTransaction().commit();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; session.close();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; @Override</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; public int count() {</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; int count = ((Long) getSession().createQuery(</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; "select count(*) from " + domainClass.getName()).uniqueResult())</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .intValue();</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return count;</span><br /><span style="color: #000080; font-size: small;">&nbsp;&nbsp;&nbsp; }</span><br /><span style="color: #000080; font-size: small;">}</span><br /><br /></p>
<p><br /><br /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br /><br /></p>
